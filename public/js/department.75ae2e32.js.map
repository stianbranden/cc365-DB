{"version":3,"sources":["webpack:///./src/components/DeliveryDeviationCard.vue?cf35","webpack:///./src/views/Department.vue","webpack:///./src/components/DeliveryDeviationCard.vue","webpack:///./src/components/DeliveryDeviationCard.vue?51f3","webpack:///./src/views/Department.vue?b47c"],"names":["$setup","_createElementBlock","class","showAlerts","state","_createBlock","_component_Alerts","department","_createVNode","_component_QueueCard","title","channel","onDblclick","_component_DeliveryDeviationCard","_Fragment","_renderList","collection","_component_CollectionQueueCard","key","_id","collectionId","viz","_component_EmbedCard","lightSrc","darkSrc","height","width","id","filters","replace","c","toUpperCase","_toDisplayString","name","country","depName","props","__exports__","components","QueueCard","Alerts","DeliveryDeviationCard","CollectionQueueCard","EmbedCard","setup","route","useRoute","store","useStore","router","useRouter","ping","computed","_","lastPing","collections","ref","getters","getVisibleCollections","delDev","length","vizes","user","filter","a","visibleOnRouters","includes","watch","value","departmentName","params","getAbbr","vizFilters","setVizFilter","field","navigate","push","onBeforeRouteUpdate","to","from","console","log","abbr","render"],"mappings":"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","file":"js/department.75ae2e32.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DeliveryDeviationCard.vue?vue&type=style&index=0&id=0ea63ac1&lang=scss&scoped=true\"","<template>\r\n  <div class=\"home\" :class=\"{showAlerts: store.state.showAlerts}\" v-if=\"department !== 'thd'\">\r\n      <Alerts v-if=\"store.state.showAlerts\" :department=\"department\" /> \r\n      <QueueCard title=\"Phone\" channel=\"PH\" :department=\"department\" @dblclick=\"navigate(departmentName, 'phone')\" />\r\n      <QueueCard title=\"Chat\" channel=\"CH\" :department=\"department\" @dblclick=\"navigate(departmentName, 'chat')\" />\r\n      <QueueCard title=\"Email\" channel=\"EM\" :department=\"department\" @dblclick=\"navigate(departmentName, 'email')\"  />\r\n      <QueueCard title=\"Action\" channel=\"AC\" :department=\"department\" @dblclick=\"navigate(departmentName, 'action')\"  />\r\n      <DeliveryDeviationCard :department=\"department\" >Delivery Deviations</DeliveryDeviationCard>\r\n      <CollectionQueueCard v-for=\"collection in collections\" :key=\"collection._id\" :collectionId=\"collection._id\" />\r\n      <EmbedCard\r\n        v-for=\"viz in vizes\"   \r\n        :key=\"viz._id\" \r\n        :lightSrc=\"viz.lightSrc\"\r\n        :darkSrc=\"viz.darkSrc\"\r\n        :height=\"viz.height\"\r\n        :width=\"viz.width\"\r\n        :id=\"viz._id\"\r\n        :filters=\"vizFilters\"\r\n      >\r\n        {{departmentName.replace(/^\\w/, (c) => c.toUpperCase())}} {{viz.name}}\r\n      </EmbedCard> \r\n  </div>\r\n  <div class=\"home\" :class=\"{showAlerts: store.state.showAlerts}\" v-else>\r\n    <Alerts v-if=\"store.state.showAlerts\" :department=\"department\" /> \r\n    <QueueCard title=\"DK THD Phone\" channel=\"PH\" country=\"DK\" :department=\"department\" @dblclick=\"navigate(departmentName, 'phone', 'denmark')\" />\r\n    <QueueCard title=\"FI THD Phone\" channel=\"PH\" country=\"FI\" :department=\"department\" @dblclick=\"navigate(departmentName, 'phone', 'finland')\" />\r\n    <QueueCard title=\"NO THD Phone\" channel=\"PH\" country=\"NO\" :department=\"department\" @dblclick=\"navigate(departmentName, 'phone', 'norway')\" />\r\n    <QueueCard title=\"SE THD Phone\" channel=\"PH\" country=\"SE\" :department=\"department\" @dblclick=\"navigate(departmentName, 'phone', 'sweden')\" />\r\n    <CollectionQueueCard v-for=\"collection in collections\" :key=\"collection._id\" :collectionId=\"collection._id\" />\r\n    <EmbedCard\r\n        v-for=\"viz in vizes\"   \r\n        :key=\"viz._id\" \r\n        :depName=\"departmentName\"\r\n        :lightSrc=\"viz.lightSrc\"\r\n        :darkSrc=\"viz.darkSrc\"\r\n        :height=\"viz.height\"\r\n        :width=\"viz.width\"\r\n        :id=\"viz._id\"\r\n        :filters=\"vizFilters\"\r\n      >\r\n        {{departmentName.replace(/^\\w/, (c) => c.toUpperCase())}} {{viz.name}}\r\n      </EmbedCard> \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {onBeforeRouteUpdate, useRoute, useRouter} from 'vue-router'\r\nimport { computed, ref, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\n// @ is an alias to /src\r\nimport QueueCard from '../components/QueueCard.vue'\r\nimport DeliveryDeviationCard from '../components/DeliveryDeviationCard.vue'\r\nimport Alerts from '../components/Alerts.vue'\r\nimport CollectionQueueCard from '../components/CollectionQueueCard.vue'\r\nimport EmbedCard from '../components/EmbedCard.vue'\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    QueueCard, Alerts, DeliveryDeviationCard, CollectionQueueCard, EmbedCard\r\n  },\r\n  setup() {\r\n    const route = useRoute();\r\n    const store = useStore();\r\n    const router = useRouter();\r\n    const ping = computed(_=>store.state.lastPing)\r\n    const collections = ref(store.getters.getVisibleCollections)\r\n    const delDev = ref(store.state.delDev.length > 0)\r\n    const vizes = ref(store.state.user?.vizes?.filter(a=>a.visibleOnRouters.includes(route.name)))\r\n    \r\n    watch(ping, _=>{\r\n      collections.value = store.getters.getVisibleCollections\r\n      delDev.value = store.state.delDev.length > 0\r\n      vizes.value = store.state.user?.vizes?.filter(a=>a.visibleOnRouters.includes(route.name))\r\n    })\r\n\r\n    const departmentName = ref(route.params.department)\r\n    let department = computed(_=> getAbbr(departmentName) )\r\n\r\n    const vizFilters = ref([setVizFilter()])\r\n\r\n    \r\n    onBeforeRouteUpdate((to, from)=>{\r\n      if ( to.params.department !== from.params.department){\r\n        departmentName.value= to.params.department\r\n        department = computed(_=> getAbbr(departmentName) )\r\n        console.log('Running obru');\r\n        vizFilters.value = [setVizFilter()]\r\n      }\r\n    })\r\n\r\n    function setVizFilter(){\r\n      let filter = {\r\n        field: 'COUNTRY',\r\n        value: departmentName.value.replace(/^\\w/, (c) => c.toUpperCase())\r\n      }\r\n      if (departmentName.value === 'helpdesk' ) {\r\n        filter.field = \"GROUPID\"\r\n        filter.value = \"Technical Helpdesk\"\r\n      }\r\n      if ( departmentName.value === 'kitchen' ){\r\n        filter.field = \"GROUPID\"\r\n        filter.value = \"Kitchen&Interior\"\r\n      }\r\n      return filter\r\n    }\r\n\r\n    function navigate(department, channel, country){\r\n      if (!country) router.push({name: 'Channel', params: {department, channel, country: 'all'}})\r\n      else router.push({name: 'Channel', params: {department, channel, country}})\r\n    }\r\n\r\n    return {department, departmentName, store, navigate, collections, route, vizes, vizFilters}\r\n  }\r\n}\r\n\r\nfunction getAbbr(name){\r\n    let abbr = 'na'\r\n\r\n    switch (name.value) {\r\n        case 'denmark':\r\n            abbr = 'dk'\r\n            break;\r\n        case 'finland':\r\n            abbr = 'fi'\r\n            break;\r\n        case 'norway':\r\n            abbr = 'no'\r\n            break;\r\n        case 'sweden':\r\n            abbr = 'se'\r\n            break;\r\n        case 'kitchen':\r\n            abbr = 'ki'\r\n            break;\r\n        case 'helpdesk':\r\n            abbr = 'thd'\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return abbr\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","<template>\r\n    <div class=\"card\">\r\n        <div class=\"card-header\">\r\n            <div class=\"flag\">        \r\n                <font-awesome-icon icon=\"truck\" />\r\n            </div>\r\n            <slot />\r\n        </div>\r\n        <DeliveryDeviationCardBody :department=\"department\" />\r\n        <div class=\"card-menu\">\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {useStore} from 'vuex'\r\nimport DeliveryDeviationCardBody from './cardbody/DeliveryDeviationCardBody'\r\n\r\nconst props = defineProps({department: String})\r\nconst department = props.department\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card {\r\n    .card-header {\r\n        .icon {\r\n            &:hover, &.active {\r\n                color: $secondary-brand-color;\r\n            }\r\n            cursor: pointer;\r\n            position: absolute;\r\n            right: 0.65rem;\r\n        }\r\n        .flag {\r\n            position: absolute;\r\n            left: 0.65rem;\r\n            color: var(--iconcolor);\r\n        }\r\n        .title {\r\n            text-transform: capitalize;\r\n        }\r\n    }\r\n}\r\n</style>","import script from \"./DeliveryDeviationCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeliveryDeviationCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DeliveryDeviationCard.vue?vue&type=style&index=0&id=0ea63ac1&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\node-projects\\\\cc365-DB\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0ea63ac1\"]])\n\nexport default __exports__","import { render } from \"./Department.vue?vue&type=template&id=aa738214\"\nimport script from \"./Department.vue?vue&type=script&lang=js\"\nexport * from \"./Department.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\node-projects\\\\cc365-DB\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}